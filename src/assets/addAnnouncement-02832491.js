import{d as b,r as c,f as h,a as E,c as k,b as t,g as l,u as a,e as v,z as x,m as f,E as s,C,v as B,s as N,j}from"./index-2d2b0b3d.js";/* empty css                *//* empty css                 */import"./el-form-item-4ed993c7.js";/* empty css                       */import{o as w,c as F}from"./loading-bf393b7e.js";const S=v("h3",null,"新增行事曆事項",-1),R=b({__name:"addAnnouncement",setup(T){const u=c(null),o=c({date:"",title:""}),_=d=>{d&&d.validate(e=>{if(e)w("資料傳輸中..."),fetch("api/addAnnouncement",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o.value)}).then(n=>n.json()).then(n=>{n.code===200?(s.success("新增成功"),m()):s.error("新增失敗")}).catch(()=>{s.error("新增失敗")}).finally(()=>{F()});else return s.error("資料不完整!"),!1})},m=()=>{o.value={date:"",title:""}},g=h({date:[{required:!0,message:"請填寫公告日期",trigger:"change"}],title:[{required:!0,message:"請填寫公告內容",trigger:"blur"}]});return(d,e)=>{const n=C,i=B,y=N,p=j,V=x;return E(),k("div",null,[S,t(V,{model:a(o),"label-width":"120px",ref_key:"formRef",ref:u,rules:a(g)},{default:l(()=>[t(i,{label:"公告日期",prop:"date"},{default:l(()=>[t(n,{modelValue:a(o).date,"onUpdate:modelValue":e[0]||(e[0]=r=>a(o).date=r),type:"daterange","range-separator":"到","start-placeholder":"公告起始日期","end-placeholder":"公告結束日期"},null,8,["modelValue"])]),_:1}),t(i,{label:"公告內容",prop:"title"},{default:l(()=>[t(y,{modelValue:a(o).title,"onUpdate:modelValue":e[1]||(e[1]=r=>a(o).title=r),type:"textarea"},null,8,["modelValue"])]),_:1}),t(i,null,{default:l(()=>[t(p,{type:"primary",onClick:e[2]||(e[2]=r=>_(a(u)))},{default:l(()=>[f("新增公告")]),_:1}),t(p,{type:"warning",onClick:m},{default:l(()=>[f("重置")]),_:1})]),_:1})]),_:1},8,["model","rules"])])}}});export{R as default};
