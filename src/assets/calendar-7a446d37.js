import{F as u,i as p}from"./index-710185f6.js";import{o as v,c as g}from"./loading-bf393b7e.js";import{d as h,r,o as f,w as F,a as m,c as C,b as k,u as w,F as y,e as A,E as c,i as x}from"./index-2d2b0b3d.js";const _=A("h3",null,"公司行事曆",-1),V=h({__name:"calendar",setup(E){const a=r(null),n=r(""),s=e=>{i();let t=a.value.getApi();e.forEach(o=>{t.addEvent({title:o.title,start:o.start,end:o.end,color:o.type==="dayOff"?"#FF4FFF":"#6363FF"})})},i=()=>{let e=a.value.getApi().getEvents();e&&e.length>0&&e.map(t=>{a.value.getApi().getEventById(t.id).remove()})},l=()=>{v(),fetch(`api/getAnnouncement?month=${n.value}`,{headers:{"Content-Type":"application/json"}}).then(e=>e.json()).then(e=>{e.code===200?s(e.data):c.error("取得資料失敗")}).catch(()=>{c.error("取得資料失敗")}).finally(()=>{g()})},d={plugins:[p],initialView:"dayGridMonth",locale:"zh-tw",buttonText:{today:"當月"},customButtons:{prev:{text:"上個月",click:()=>{let e=a.value.getApi();e.prev();let t=new Date(e.view.currentStart);n.value=t.getFullYear()+"-"+(t.getMonth()+1),l()}},next:{text:"下個月",click:()=>{let e=a.value.getApi();e.next();let t=new Date(e.view.currentStart);n.value=t.getFullYear()+"-"+(t.getMonth()+1),l()}},today:{text:"當月",click:()=>{let e=a.value.getApi();e.today();let t=new Date(e.view.currentStart);n.value=t.getFullYear()+"-"+(t.getMonth()+1),l()}}},events:[]};return f(()=>{let e=new Date;n.value=e.getFullYear()+"-"+(e.getMonth()+1),l()}),F(x,()=>{setTimeout(()=>{a.value.getApi().updateSize()},500)}),(e,t)=>(m(),C(y,null,[_,k(w(u),{ref_key:"fullCalendar",ref:a,options:d},null,512)],64))}});export{V as default};
