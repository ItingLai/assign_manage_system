import{d as D,r as f,o as I,a as m,c as M,e as t,b as a,u as _,h as T,g as c,E as i,C as V,j as B,q as $,k as j,m as s,t as r,A as b,p as N}from"./index-2d2b0b3d.js";/* empty css                        *//* empty css               *//* empty css                       *//* empty css                 */import{o as k,c as y}from"./loading-bf393b7e.js";const P=t("h3",null,"薪資計算",-1),S=t("h5",null,"出缺席天數統計表",-1),A=t("p",{style:{color:"red"}},"*請先調整完成出席狀態確認出席資料無誤再點擊薪資計算",-1),F={style:{display:"flex","margin-bottom":"10px"}},L=t("label",{style:{"margin-right":"5px"}},"選擇查看月份:",-1),O={style:{margin:"1rem 0 0 2rem"}},Y={class:"userInfo"},q=t("span",{class:"title"},"出席天數: ",-1),J={class:"userInfo"},R=t("span",{class:"title"},"事假天數: ",-1),U={class:"userInfo"},z=t("span",{class:"title"},"病假天數: ",-1),G={class:"userInfo"},H=t("span",{class:"title"},"公假天數: ",-1),K={class:"userInfo"},Q=t("span",{class:"title"},"曠職天數: ",-1),W={class:"userInfo"},X=t("span",{class:"title"},"未入職天數: ",-1),ne=D({__name:"salaryCalc",setup(Z){const g=f([]),n=f(""),p=f(!1),u=()=>{k(),fetch(`api/allAttendStatus?month=${n.value}`).then(e=>e.json()).then(e=>{e.code===200?(g.value=e.data,p.value=e.isCalc):i.error("資料取得失敗")}).catch(()=>{i.error("資料取得失敗")}).finally(()=>{y()})},w=()=>{let e=new Date(n.value);n.value=`${e.getFullYear()}-${e.getMonth()+1}`,u()},C=()=>{k("薪資計算中..."),fetch("api/salaryCalc",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({month:n.value})}).then(e=>e.json()).then(e=>{y(),e.code===200?(i.success("薪資計算完成"),u()):e.code===401?i.error("當月尚未結束!"):i.error("薪資計算失敗")}).catch(()=>{y(),i.error("薪資計算失敗")})};return I(()=>{let e=new Date,d=e.getMonth()==0?12:e.getMonth();n.value=`${e.getFullYear()}-${d}`,u()}),(e,d)=>{const v=V,x=B,h=$,l=N,E=j;return m(),M("div",null,[P,S,A,t("div",F,[L,a(v,{modelValue:_(n),"onUpdate:modelValue":d[0]||(d[0]=o=>T(n)?n.value=o:null),type:"month",placeholder:"選擇計算月份",onChange:w},null,8,["modelValue"]),a(x,{onClick:C,type:"primary",style:{"margin-left":"10px"}},{default:c(()=>[s(" 薪資計算 ")]),_:1})]),a(h,{type:_(p)?"success":"danger",effect:"dark",style:{"margin-bottom":"10px"}},{default:c(()=>[s(r(_(p)?"薪資計算完成":"尚未計算薪資"),1)]),_:1},8,["type"]),a(E,{data:_(g),border:!0,style:{width:"100%"}},{default:c(()=>[a(l,{type:"expand"},{default:c(o=>[t("div",O,[t("p",Y,[q,s(" "+r(o.row.attend),1)]),t("p",J,[R,s(" "+r(o.row.personal),1)]),t("p",U,[z,s(" "+r(o.row.sick),1)]),t("p",G,[H,s(" "+r(o.row.official),1)]),t("p",K,[Q,s(" "+r(o.row.absent),1)]),t("p",W,[X,s(" "+r(o.row.notEntry),1)])])]),_:1}),a(l,{label:"姓名",prop:"name"}),a(l,{label:"出席天數",prop:"attend"}),a(l,{label:"事假天數",prop:"personal"}),a(l,{label:"病假天數",prop:"sick"}),a(l,{label:"公假天數",prop:"official"}),a(l,{label:"曠職天數",prop:"absent"}),a(l,{label:"未入職天數",prop:"notEntry"}),a(l,{label:"全勤",prop:"isPerfect"},{default:c(o=>[o.row.isPerfect?(m(),b(h,{key:0,type:"success",effect:"dark"},{default:c(()=>[s("是")]),_:1})):(m(),b(h,{key:1,type:"danger",effect:"dark"},{default:c(()=>[s("否")]),_:1}))]),_:1})]),_:1},8,["data"])])}}});export{ne as default};
