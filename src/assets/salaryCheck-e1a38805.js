import{d as x,r as f,o as D,a as m,c as M,e,b as n,u as d,h as T,g as i,E as _,C as V,j as B,q as $,k as j,m as o,t as a,A as g,p as N}from"./index-2d2b0b3d.js";/* empty css                        *//* empty css               *//* empty css                       *//* empty css                 */import{o as b,c as y}from"./loading-bf393b7e.js";const S=e("h3",null,"薪資確認",-1),A=e("h5",null,"所有人員當月薪資表",-1),F=e("p",{style:{color:"red"}},"*如薪資計算錯誤或資料有誤請聯絡人事進行出席資料更改!",-1),L={style:{display:"flex","margin-bottom":"10px"}},O=e("label",{style:{"margin-right":"5px"}},"選擇查看月份:",-1),P={style:{margin:"1rem 0 0 2rem"}},Y={class:"userInfo"},q=e("span",{class:"title"},"出席天數: ",-1),H={class:"userInfo"},J=e("span",{class:"title"},"事假天數: ",-1),R={class:"userInfo"},U=e("span",{class:"title"},"病假天數: ",-1),z={class:"userInfo"},G=e("span",{class:"title"},"公假天數: ",-1),K={class:"userInfo"},Q=e("span",{class:"title"},"曠職天數: ",-1),W={class:"userInfo"},X=e("span",{class:"title"},"未入職天數: ",-1),Z={class:"userInfo"},ee=e("span",{class:"title"},"底薪: ",-1),te={class:"userInfo"},se=e("span",{class:"title"},"全勤獎金: ",-1),oe={class:"userInfo"},ae=e("span",{class:"title"},"病事假扣薪: ",-1),ne={class:"userInfo"},le=e("span",{class:"title"},"未入職扣薪: ",-1),ce={class:"userInfo"},ie=e("span",{class:"title"},"曠職扣薪: ",-1),_e={class:"userInfo"},re=e("span",{class:"title"},"勞健保: ",-1),de={class:"userInfo"},he=e("span",{class:"title"},"總薪資: ",-1),be=x({__name:"salaryCheck",setup(pe){const w=f([]),c=f(""),h=f(!1),p=()=>{b(),fetch(`api/getAllSalary?month=${c.value}`).then(t=>t.json()).then(t=>{t.code===200?(w.value=t.data,h.value=t.isCheck):_.error("資料取得失敗")}).catch(()=>{_.error("資料取得失敗")}).finally(()=>{y()})},k=()=>{let t=new Date(c.value);c.value=`${t.getFullYear()}-${t.getMonth()+1}`,p()},C=()=>{b("薪資確認中..."),fetch("api/salaryCheck",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({month:c.value})}).then(t=>t.json()).then(t=>{y(),t.code===200?(_.success("已成功上傳薪資"),p()):_.error("薪資確認失敗")}).catch(()=>{y(),_.error("薪資確認失敗")})};return D(()=>{let t=new Date,r=t.getMonth()==0?12:t.getMonth();c.value=`${t.getFullYear()}-${r}`,p()}),(t,r)=>{const I=V,v=B,u=$,l=N,E=j;return m(),M("div",null,[S,A,F,e("div",L,[O,n(I,{modelValue:d(c),"onUpdate:modelValue":r[0]||(r[0]=s=>T(c)?c.value=s:null),type:"month",placeholder:"選擇確認月份",onChange:k},null,8,["modelValue"]),n(v,{onClick:C,type:"primary",style:{"margin-left":"10px"}},{default:i(()=>[o(" 薪資確認 ")]),_:1})]),n(u,{type:d(h)?"success":"danger",effect:"dark",style:{"margin-bottom":"10px"}},{default:i(()=>[o(a(d(h)?"薪資確認完成":"尚未確認薪資"),1)]),_:1},8,["type"]),n(E,{data:d(w),border:!0,style:{width:"100%"}},{default:i(()=>[n(l,{type:"expand"},{default:i(s=>[e("div",P,[e("p",Y,[q,o(" "+a(s.row.attend),1)]),e("p",H,[J,o(" "+a(s.row.personal),1)]),e("p",R,[U,o(" "+a(s.row.sick),1)]),e("p",z,[G,o(" "+a(s.row.official),1)]),e("p",K,[Q,o(" "+a(s.row.absent),1)]),e("p",W,[X,o(" "+a(s.row.notEntry),1)]),e("p",Z,[ee,o(" "+a(s.row.basic),1)]),e("p",te,[se,o(" "+a(s.row.perfectAttend),1)]),e("p",oe,[ae,o(" "+a(s.row.sick_personal_deduction),1)]),e("p",ne,[le,o(" "+a(s.row.notEntry_deduction),1)]),e("p",ce,[ie,o(" "+a(s.row.dock),1)]),e("p",_e,[re,o(" "+a(s.row.laborHealthInsurance),1)]),e("p",de,[he,o(" "+a(s.row.total),1)])])]),_:1}),n(l,{label:"姓名",prop:"name"}),n(l,{label:"出席天數",prop:"attend",width:"100"}),n(l,{label:"事假天數",prop:"personal",width:"100"}),n(l,{label:"病假天數",prop:"sick",width:"100"}),n(l,{label:"公假天數",prop:"official",width:"100"}),n(l,{label:"曠職天數",prop:"absent",width:"100"}),n(l,{label:"未入職天數",prop:"notEntry",width:"100"}),n(l,{label:"是否上傳",prop:"isCheck",width:"100"},{default:i(s=>[s.row.isCheck?(m(),g(u,{key:0,type:"success",effect:"dark"},{default:i(()=>[o("是")]),_:1})):(m(),g(u,{key:1,type:"danger",effect:"dark"},{default:i(()=>[o("否")]),_:1}))]),_:1})]),_:1},8,["data"])])}}});export{be as default};
